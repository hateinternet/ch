function _setState(t,e){var n=_buildStateClass(t,e),i=Page.$html.attr("class").split(/\s+/).filter(function(e){return e.indexOf(t)>-1}).pop();return Page.$html.removeClass(i).addClass(n),"slide"===t&&(Page.slide=e),Page}function _toggleState(t,e){var n=_buildStateClass(t,e);return Page.$html.toggleClass(n),Page}function _delState(t,e){var n=_buildStateClass(t,e);return Page.$html.removeClass(n),Page}function _hasState(t,e){var n=_buildStateClass(t,e);return Page.$html.hasClass(n)}function _buildStateClass(t,e){return["page",t,e].filter(Boolean).join("_")}!function(t,e,n,i){"use strict";function o(t,e,n){return setTimeout(c(t,n),e)}function r(t,e,n){return!!Array.isArray(t)&&(a(t,n[e],n),!0)}function a(t,e,n){var o;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==i)for(o=0;o<t.length;)e.call(n,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function s(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,o,i),e.apply(this,arguments)}}function l(t,e,n){var i,o=e.prototype;(i=t.prototype=Object.create(o)).constructor=t,i._super=o,n&&ut(i,n)}function c(t,e){return function(){return t.apply(e,arguments)}}function u(t,e){return typeof t==ft?t.apply(e?e[0]||i:i,e):t}function d(t,e){return t===i?e:t}function h(t,e,n){a(v(e),function(e){t.addEventListener(e,n,!1)})}function f(t,e,n){a(v(e),function(e){t.removeEventListener(e,n,!1)})}function p(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function g(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function y(t,e,n){for(var i=[],o=[],r=0;r<t.length;){var a=e?t[r][e]:t[r];g(o,a)<0&&i.push(t[r]),o[r]=a,r++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function w(t,e){for(var n,o,r=e[0].toUpperCase()+e.slice(1),a=0;a<dt.length;){if(n=dt[a],(o=n?n+r:e)in t)return o;a++}return i}function x(){return yt++}function S(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function b(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){u(t.options.enable,[t])&&n.handler(e)},this.init()}function C(t){var e=t.options.inputClass;return new(e||(xt?H:St?q:wt?X:z))(t,T)}function T(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,r=e&Et&&i-o==0,a=e&(kt|Bt)&&i-o==0;n.isFirst=!!r,n.isFinal=!!a,r&&(t.session={}),n.eventType=e,E(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function E(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=B(e)),o>1&&!n.firstMultiple?n.firstMultiple=B(e):1===o&&(n.firstMultiple=!1);var r=n.firstInput,a=n.firstMultiple,s=a?a.center:r.center,l=e.center=D(i);e.timeStamp=vt(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=A(s,l),e.distance=P(s,l),I(n,e),e.offsetDirection=O(e.deltaX,e.deltaY);var c=M(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=mt(c.x)>mt(c.y)?c.x:c.y,e.scale=a?L(a.pointers,i):1,e.rotation=a?R(a.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,k(n,e);var u=t.element;p(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function I(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},r=t.prevInput||{};e.eventType!==Et&&r.eventType!==kt||(o=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function k(t,e){var n,o,r,a,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=Bt&&(l>Tt||s.velocity===i)){var c=e.deltaX-s.deltaX,u=e.deltaY-s.deltaY,d=M(l,c,u);o=d.x,r=d.y,n=mt(d.x)>mt(d.y)?d.x:d.y,a=O(c,u),t.lastInterval=e}else n=s.velocity,o=s.velocityX,r=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=o,e.velocityY=r,e.direction=a}function B(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:pt(t.pointers[n].clientX),clientY:pt(t.pointers[n].clientY)},n++;return{timeStamp:vt(),pointers:e,center:D(e),deltaX:t.deltaX,deltaY:t.deltaY}}function D(t){var e=t.length;if(1===e)return{x:pt(t[0].clientX),y:pt(t[0].clientY)};for(var n=0,i=0,o=0;e>o;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:pt(n/e),y:pt(i/e)}}function M(t,e,n){return{x:e/t||0,y:n/t||0}}function O(t,e){return t===e?Dt:mt(t)>=mt(e)?0>t?Mt:Ot:0>e?Pt:At}function P(t,e,n){n||(n=Ht);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function A(t,e,n){n||(n=Ht);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function R(t,e){return A(e[1],e[0],Wt)+A(t[1],t[0],Wt)}function L(t,e){return P(e[0],e[1],Wt)/P(t[0],t[1],Wt)}function z(){this.evEl=qt,this.evWin=jt,this.pressed=!1,b.apply(this,arguments)}function H(){this.evEl=Nt,this.evWin=Ft,b.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function W(){this.evTarget=Vt,this.evWin=Gt,this.started=!1,b.apply(this,arguments)}function $(t,e){var n=_(t.touches),i=_(t.changedTouches);return e&(kt|Bt)&&(n=y(n.concat(i),"identifier",!0)),[n,i]}function q(){this.evTarget=Qt,this.targetIds={},b.apply(this,arguments)}function j(t,e){var n=_(t.touches),i=this.targetIds;if(e&(Et|It)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,r,a=_(t.changedTouches),s=[],l=this.target;if(r=n.filter(function(t){return p(t.target,l)}),e===Et)for(o=0;o<r.length;)i[r[o].identifier]=!0,o++;for(o=0;o<a.length;)i[a[o].identifier]&&s.push(a[o]),e&(kt|Bt)&&delete i[a[o].identifier],o++;return s.length?[y(r.concat(s),"identifier",!0),s]:void 0}function X(){b.apply(this,arguments);var t=c(this.handler,this);this.touch=new q(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Y(t,e){t&Et?(this.primaryTouch=e.changedPointers[0].identifier,N.call(this,e)):t&(kt|Bt)&&N.call(this,e)}function N(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout(function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)},Jt)}}function F(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],r=Math.abs(e-o.x),a=Math.abs(n-o.y);if(Kt>=r&&Kt>=a)return!0}return!1}function U(t,e){this.manager=t,this.set(e)}function V(t){if(m(t,re))return re;var e=m(t,ae),n=m(t,se);return e&&n?re:e||n?e?ae:se:m(t,oe)?oe:ie}function G(t){this.options=ut({},this.defaults,t||{}),this.id=x(),this.manager=null,this.options.enable=d(this.options.enable,!0),this.state=ce,this.simultaneous={},this.requireFail=[]}function Z(t){return t&pe?"cancel":t&he?"end":t&de?"move":t&ue?"start":""}function Q(t){return t==At?"down":t==Pt?"up":t==Mt?"left":t==Ot?"right":""}function J(t,e){var n=e.manager;return n?n.get(t):t}function K(){G.apply(this,arguments)}function tt(){K.apply(this,arguments),this.pX=null,this.pY=null}function et(){K.apply(this,arguments)}function nt(){G.apply(this,arguments),this._timer=null,this._input=null}function it(){K.apply(this,arguments)}function ot(){K.apply(this,arguments)}function rt(){G.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function at(t,e){return e=e||{},e.recognizers=d(e.recognizers,at.defaults.preset),new st(t,e)}function st(t,e){this.options=ut({},at.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=C(this),this.touchAction=new U(this,this.options.touchAction),lt(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function lt(t,e){var n=t.element;if(n.style){var i;a(t.options.cssProps,function(o,r){i=w(n.style,r),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ct(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ut,dt=["","webkit","Moz","MS","ms","o"],ht=e.createElement("div"),ft="function",pt=Math.round,mt=Math.abs,vt=Date.now;ut="function"!=typeof Object.assign?function(t){if(t===i||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==i&&null!==o)for(var r in o)o.hasOwnProperty(r)&&(e[r]=o[r])}return e}:Object.assign;var gt=s(function(t,e,n){for(var o=Object.keys(e),r=0;r<o.length;)(!n||n&&t[o[r]]===i)&&(t[o[r]]=e[o[r]]),r++;return t},"extend","Use `assign`."),_t=s(function(t,e){return gt(t,e,!0)},"merge","Use `assign`."),yt=1,wt="ontouchstart"in t,xt=w(t,"PointerEvent")!==i,St=wt&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),bt="touch",Ct="mouse",Tt=25,Et=1,It=2,kt=4,Bt=8,Dt=1,Mt=2,Ot=4,Pt=8,At=16,Rt=Mt|Ot,Lt=Pt|At,zt=Rt|Lt,Ht=["x","y"],Wt=["clientX","clientY"];b.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(S(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(S(this.element),this.evWin,this.domHandler)}};var $t={mousedown:Et,mousemove:It,mouseup:kt},qt="mousedown",jt="mousemove mouseup";l(z,b,{handler:function(t){var e=$t[t.type];e&Et&&0===t.button&&(this.pressed=!0),e&It&&1!==t.which&&(e=kt),this.pressed&&(e&kt&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Ct,srcEvent:t}))}});var Xt={pointerdown:Et,pointermove:It,pointerup:kt,pointercancel:Bt,pointerout:Bt},Yt={2:bt,3:"pen",4:Ct,5:"kinect"},Nt="pointerdown",Ft="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Nt="MSPointerDown",Ft="MSPointerMove MSPointerUp MSPointerCancel"),l(H,b,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),o=Xt[i],r=Yt[t.pointerType]||t.pointerType,a=r==bt,s=g(e,t.pointerId,"pointerId");o&Et&&(0===t.button||a)?0>s&&(e.push(t),s=e.length-1):o&(kt|Bt)&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,o,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),n&&e.splice(s,1))}});var Ut={touchstart:Et,touchmove:It,touchend:kt,touchcancel:Bt},Vt="touchstart",Gt="touchstart touchmove touchend touchcancel";l(W,b,{handler:function(t){var e=Ut[t.type];if(e===Et&&(this.started=!0),this.started){var n=$.call(this,t,e);e&(kt|Bt)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:t})}}});var Zt={touchstart:Et,touchmove:It,touchend:kt,touchcancel:Bt},Qt="touchstart touchmove touchend touchcancel";l(q,b,{handler:function(t){var e=Zt[t.type],n=j.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:bt,srcEvent:t})}});var Jt=2500,Kt=25;l(X,b,{handler:function(t,e,n){var i=n.pointerType==bt,o=n.pointerType==Ct;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Y.call(this,e,n);else if(o&&F.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var te=w(ht.style,"touchAction"),ee=te!==i,ne="compute",ie="auto",oe="manipulation",re="none",ae="pan-x",se="pan-y",le=function(){if(!ee)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}();U.prototype={set:function(t){t==ne&&(t=this.compute()),ee&&this.manager.element.style&&le[t]&&(this.manager.element.style[te]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){u(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),V(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;{if(!this.manager.session.prevented){var i=this.actions,o=m(i,re)&&!le[re],r=m(i,se)&&!le[se],a=m(i,ae)&&!le[ae];if(o){var s=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(s&&l&&c)return}return a&&r?void 0:o||r&&n&Rt||a&&n&Lt?this.preventSrc(e):void 0}e.preventDefault()}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ce=1,ue=2,de=4,he=8,fe=he,pe=16;G.prototype={defaults:{},set:function(t){return ut(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=J(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=J(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=J(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=J(t,this);var e=g(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;he>i&&e(n.options.event+Z(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=he&&e(n.options.event+Z(i))},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=32)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ce)))return!1;t++}return!0},recognize:function(t){var e=ut({},t);return u(this.options.enable,[this,e])?(this.state&(fe|pe|32)&&(this.state=ce),this.state=this.process(e),void(this.state&(ue|de|he|pe)&&this.tryEmit(e))):(this.reset(),void(this.state=32))},process:function(t){},getTouchAction:function(){},reset:function(){}},l(K,G,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(ue|de),o=this.attrTest(t);return i&&(n&Bt||!o)?e|pe:i||o?n&kt?e|he:e&ue?e|de:ue:32}}),l(tt,K,{defaults:{event:"pan",threshold:10,pointers:1,direction:zt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Rt&&e.push(se),t&Lt&&e.push(ae),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,r=t.deltaX,a=t.deltaY;return o&e.direction||(e.direction&Rt?(o=0===r?Dt:0>r?Mt:Ot,n=r!=this.pX,i=Math.abs(t.deltaX)):(o=0===a?Dt:0>a?Pt:At,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return K.prototype.attrTest.call(this,t)&&(this.state&ue||!(this.state&ue)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Q(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(et,K,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&ue)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(nt,G,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[ie]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(kt|Bt)&&!r)this.reset();else if(t.eventType&Et)this.reset(),this._timer=o(function(){this.state=fe,this.tryEmit()},e.time,this);else if(t.eventType&kt)return fe;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===fe&&(t&&t.eventType&kt?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=vt(),this.manager.emit(this.options.event,this._input)))}}),l(it,K,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[re]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&ue)}}),l(ot,K,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Rt|Lt,pointers:1},getTouchAction:function(){return tt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Rt|Lt)?e=t.overallVelocity:n&Rt?e=t.overallVelocityX:n&Lt&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&mt(e)>this.options.velocity&&t.eventType&kt},emit:function(t){var e=Q(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(rt,G,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[oe]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&Et&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=kt)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||P(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=o(function(){this.state=fe,this.tryEmit()},e.interval,this),ue):fe}return 32},failTimeout:function(){return this._timer=o(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==fe&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),at.VERSION="2.0.8",at.defaults={domEvents:!1,touchAction:ne,enable:!0,inputTarget:null,inputClass:null,preset:[[it,{enable:!1}],[et,{enable:!1},["rotate"]],[ot,{direction:Rt}],[tt,{direction:Rt},["swipe"]],[rt],[rt,{event:"doubletap",taps:2},["tap"]],[nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};st.prototype={set:function(t){return ut(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&fe)&&(o=e.curRecognizer=null);for(var r=0;r<i.length;)n=i[r],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(ue|de|he)&&(o=e.curRecognizer=n),r++}},get:function(t){if(t instanceof G)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=g(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==i&&e!==i){var n=this.handlers;return a(v(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==i){var n=this.handlers;return a(v(t),function(t){e?n[t]&&n[t].splice(g(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&lt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ut(at,{INPUT_START:Et,INPUT_MOVE:It,INPUT_END:kt,INPUT_CANCEL:Bt,STATE_POSSIBLE:ce,STATE_BEGAN:ue,STATE_CHANGED:de,STATE_ENDED:he,STATE_RECOGNIZED:fe,STATE_CANCELLED:pe,STATE_FAILED:32,DIRECTION_NONE:Dt,DIRECTION_LEFT:Mt,DIRECTION_RIGHT:Ot,DIRECTION_UP:Pt,DIRECTION_DOWN:At,DIRECTION_HORIZONTAL:Rt,DIRECTION_VERTICAL:Lt,DIRECTION_ALL:zt,Manager:st,Input:b,TouchAction:U,TouchInput:q,MouseInput:z,PointerEventInput:H,TouchMouseInput:X,SingleTouchInput:W,Recognizer:G,AttrRecognizer:K,Tap:rt,Pan:tt,Swipe:ot,Pinch:et,Rotate:it,Press:nt,on:h,off:f,each:a,merge:_t,extend:gt,assign:ut,inherit:l,bindFn:c,prefixed:w}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=at,"function"==typeof define&&define.amd?define(function(){return at}):"undefined"!=typeof module&&module.exports?module.exports=at:t.Hammer=at}(window,document),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==typeof module&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var n=this._events=this._events||{},i=n[t]=n[t]||[];return-1==i.indexOf(e)&&i.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var n=this._onceEvents=this._onceEvents||{};return(n[t]=n[t]||{})[e]=!0,this}},e.off=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=n.indexOf(e);return-1!=i&&n.splice(i,1),this}},e.emitEvent=function(t,e){var n=this._events&&this._events[t];if(n&&n.length){var i=0,o=n[i];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];o;){var a=r&&r[o];a&&(this.off(t,o),delete r[o]),o.apply(this,e),o=n[i+=a?0:1]}return this}},e.allOff=e.removeAllListeners=function(){delete this._events,delete this._onceEvents},t}),function(t,e){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(n){return e(t,n)}):"object"==typeof module&&module.exports?module.exports=e(t,require("ev-emitter")):t.imagesLoaded=e(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function n(t,e){for(var n in e)t[n]=e[n];return t}function i(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}function o(t,e,r){return this instanceof o?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=i(t),this.options=n({},this.options),"function"==typeof e?r=e:n(this.options,e),r&&this.on("always",r),this.getImages(),s&&(this.jqDeferred=new s.Deferred),void setTimeout(function(){this.check()}.bind(this))):new o(t,e,r)}function r(t){this.img=t}function a(t,e){this.url=t,this.element=e,this.img=new Image}var s=t.jQuery,l=t.console;o.prototype=Object.create(e.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(t){"IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t);var e=t.nodeType;if(e&&c[e]){for(var n=t.querySelectorAll("img"),i=0;i<n.length;i++){var o=n[i];this.addImage(o)}if("string"==typeof this.options.background){var r=t.querySelectorAll(this.options.background);for(i=0;i<r.length;i++){var a=r[i];this.addElementBackgroundImages(a)}}}};var c={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var n=/url\((['"])?(.*?)\1\)/gi,i=n.exec(e.backgroundImage);null!==i;){var o=i&&i[2];o&&this.addBackground(o,t),i=n.exec(e.backgroundImage)}},o.prototype.addImage=function(t){var e=new r(t);this.images.push(e)},o.prototype.addBackground=function(t,e){var n=new a(t,e);this.images.push(n)},o.prototype.check=function(){function t(t,n,i){setTimeout(function(){e.progress(t,n,i)})}var e=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},o.prototype.progress=function(t,e,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&l&&l.log("progress: "+n,t,e)},o.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},r.prototype=Object.create(e.prototype),r.prototype.check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype=Object.create(r.prototype),a.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},a.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},a.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},o.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&(s=e,s.fn.imagesLoaded=function(t,e){return new o(this,t,e).jqDeferred.promise(s(this))})},o.makeJQueryPlugin(),o});var WheelIndicator=function(t,e){function n(t){this._options=c(d,t),this._deltaArray=[0,0,0],this._isAcceleration=!1,this._isStopped=!0,this._direction="",this._timer="",this._isWorking=!0;var e=this;this._wheelHandler=function(t){e._isWorking&&(r.call(e,t),e._options.preventMouse&&o(t))},s(this._options.elem,u,this._wheelHandler)}function i(t){t.direction=this._direction,this._options.callback.call(this,t)}function o(e){(e=e||t.event).preventDefault?e.preventDefault():e.returnValue=!1}function r(t){var e=this,n=h(t);if(0!==n){var o,r=n>0?"down":"up",s=e._deltaArray.length,l=!1,c=0;for(clearTimeout(e._timer),e._timer=setTimeout(function(){e._deltaArray=[0,0,0],e._isStopped=!0,e._direction=r},150),o=0;o<s;o++)0!==e._deltaArray[o]&&(e._deltaArray[o]>0?++c:--c);Math.abs(c)===s&&(c>0?"down":"up")!==e._direction&&(l=!0,e._direction=r),e._isStopped||(l?(e._isAcceleration=!0,i.call(this,t)):Math.abs(c)===s&&a.call(this,t)),e._isStopped&&(e._isStopped=!1,e._isAcceleration=!0,e._direction=r,i.call(this,t)),e._deltaArray.shift(),e._deltaArray.push(n)}}function a(t){var e=Math.abs(this._deltaArray[0]),n=Math.abs(this._deltaArray[1]),o=Math.abs(this._deltaArray[2]),r=Math.abs(h(t));r>o&&o>n&&n>e&&(this._isAcceleration||(i.call(this,t),this._isAcceleration=!0)),r<o&&o<=n&&(this._isAcceleration=!1)}function s(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)}function l(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent&&t.detachEvent("on"+e,n)}function c(t,e){var n,i={};for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n]);return i}var u="onwheel"in e?"wheel":"mousewheel",d={callback:function(){},elem:e,preventMouse:!0};n.prototype={constructor:n,turnOn:function(){return this._isWorking=!0,this},turnOff:function(){return this._isWorking=!1,this},setOptions:function(t){return this._options=c(this._options,t),this},getOption:function(t){var e=this._options[t];if(void 0!==e)return e;throw new Error("Unknown option")},destroy:function(){return l(this._options.elem,u,this._wheelHandler),this}};var h=function(t){return(h=t.wheelDelta&&!t.deltaY?function(t){return-1*t.wheelDelta}:function(t){return t.deltaY})(t)};return n}(window,document);"object"==typeof exports&&(module.exports=WheelIndicator),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,d=0,h=0,f=0,p=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in a&&(h=-1*a.deltaY,c=h),"deltaX"in a&&(d=a.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===a.deltaMode){var v=t.data(this,"mousewheel-line-height");c*=v,h*=v,d*=v}else if(2===a.deltaMode){var g=t.data(this,"mousewheel-page-height");c*=g,h*=g,d*=g}if(f=Math.max(Math.abs(h),Math.abs(d)),(!r||r>f)&&(r=f,i(a,f)&&(r/=40)),i(a,f)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/r),d=Math[d>=1?"floor":"ceil"](d/r),h=Math[h>=1?"floor":"ceil"](h/r),u.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=e.clientX-_.left,m=e.clientY-_.top}return e.deltaX=d,e.deltaY=h,e.deltaFactor=r,e.offsetX=p,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,d,h),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){r=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,d=0,h=0,f=0,p=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(h=-1*a.detail),"wheelDelta"in a&&(h=a.wheelDelta),"wheelDeltaY"in a&&(h=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*h,h=0),c=0===h?d:h,"deltaY"in a&&(h=-1*a.deltaY,c=h),"deltaX"in a&&(d=a.deltaX,0===h&&(c=-1*d)),0!==h||0!==d){if(1===a.deltaMode){var v=t.data(this,"mousewheel-line-height");c*=v,h*=v,d*=v}else if(2===a.deltaMode){var g=t.data(this,"mousewheel-page-height");c*=g,h*=g,d*=g}if(f=Math.max(Math.abs(h),Math.abs(d)),(!r||r>f)&&(r=f,i(a,f)&&(r/=40)),i(a,f)&&(c/=40,d/=40,h/=40),c=Math[c>=1?"floor":"ceil"](c/r),d=Math[d>=1?"floor":"ceil"](d/r),h=Math[h>=1?"floor":"ceil"](h/r),u.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();p=e.clientX-_.left,m=e.clientY-_.top}return e.deltaX=d,e.deltaY=h,e.deltaFactor=r,e.offsetX=p,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,d,h),o&&clearTimeout(o),o=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){r=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120==0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(t){!function(e){var n="function"==typeof define&&define.amd,i="undefined"!=typeof module&&module.exports,o="https:"==document.location.protocol?"https:":"http:";n||(i?require("jquery-mousewheel")(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+o+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E"))),e()}(function(){var e,n="mCustomScrollbar",i="mCS",o=".mCustomScrollbar",r={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],d={init:function(e){var e=t.extend(!0,{},r,e),n=h.call(this);if(e.live){var l=e.liveSelector||this.selector||o,c=t(l);if("off"===e.live)return void p(l);s[l]=setTimeout(function(){c.mCustomScrollbar(e),"once"===e.live&&c.length&&p(l)},500)}else p(l);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":m(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=v(e.scrollButtons.scrollType),f(e),t(n).each(function(){var n=t(this);if(!n.data(i)){n.data(i,{idx:++a,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var o=n.data(i),r=o.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(r.axis=s),l&&(r.scrollbarPosition=l),c&&(r.theme=c,f(r)),g.call(this),o&&r.callbacks.onCreate&&"function"==typeof r.callbacks.onCreate&&r.callbacks.onCreate.call(this),t("#mCSB_"+o.idx+"_container img:not(."+u[2]+")").addClass(u[2]),d.update.call(null,n)}})},update:function(e,n){var o=e||h.call(this);return t(o).each(function(){var e=t(this);if(e.data(i)){var o=e.data(i),r=o.opt,a=t("#mCSB_"+o.idx+"_container"),s=t("#mCSB_"+o.idx),l=[t("#mCSB_"+o.idx+"_dragger_vertical"),t("#mCSB_"+o.idx+"_dragger_horizontal")];if(!a.length)return;o.tweenRunning&&V(e),n&&o&&r.callbacks.onBeforeUpdate&&"function"==typeof r.callbacks.onBeforeUpdate&&r.callbacks.onBeforeUpdate.call(this),e.hasClass(u[3])&&e.removeClass(u[3]),e.hasClass(u[4])&&e.removeClass(u[4]),s.css("max-height","none"),s.height()!==e.height()&&s.css("max-height",e.height()),y.call(this),"y"===r.axis||r.advanced.autoExpandHorizontalScroll||a.css("width",_(a)),o.overflowed=C.call(this),k.call(this),r.autoDraggerLength&&x.call(this),S.call(this),E.call(this);var c=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==r.axis&&(o.overflowed[0]?l[0].height()>l[0].parent().height()?T.call(this):(G(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}),o.contentReset.y=null):(T.call(this),"y"===r.axis?I.call(this):"yx"===r.axis&&o.overflowed[1]&&G(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==r.axis&&(o.overflowed[1]?l[1].width()>l[1].parent().width()?T.call(this):(G(e,c[1].toString(),{dir:"x",dur:0,overwrite:"none"}),o.contentReset.x=null):(T.call(this),"x"===r.axis?I.call(this):"yx"===r.axis&&o.overflowed[0]&&G(e,c[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&o&&(2===n&&r.callbacks.onImageLoad&&"function"==typeof r.callbacks.onImageLoad?r.callbacks.onImageLoad.call(this):3===n&&r.callbacks.onSelectorChange&&"function"==typeof r.callbacks.onSelectorChange?r.callbacks.onSelectorChange.call(this):r.callbacks.onUpdate&&"function"==typeof r.callbacks.onUpdate&&r.callbacks.onUpdate.call(this)),F.call(this)}})},scrollTo:function(e,n){if(void 0!==e&&null!=e){var o=h.call(this);return t(o).each(function(){var o=t(this);if(o.data(i)){var r=o.data(i),a=r.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},s,n),c=Y.call(this,e),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=N.call(this,c[0],"y"),c[1]=N.call(this,c[1],"x"),l.moveDragger&&(c[0]*=r.scrollRatio.y,c[1]*=r.scrollRatio.x),l.dur=ot()?0:u,setTimeout(function(){null!==c[0]&&void 0!==c[0]&&"x"!==a.axis&&r.overflowed[0]&&(l.dir="y",l.overwrite="all",G(o,c[0].toString(),l)),null!==c[1]&&void 0!==c[1]&&"y"!==a.axis&&r.overflowed[1]&&(l.dir="x",l.overwrite="none",G(o,c[1].toString(),l))},l.timeout)}})}},stop:function(){var e=h.call(this);return t(e).each(function(){var e=t(this);e.data(i)&&V(e)})},disable:function(e){var n=h.call(this);return t(n).each(function(){var n=t(this);n.data(i)&&(n.data(i),F.call(this,"remove"),I.call(this),e&&T.call(this),k.call(this,!0),n.addClass(u[3]))})},destroy:function(){var e=h.call(this);return t(e).each(function(){var o=t(this);if(o.data(i)){var r=o.data(i),a=r.opt,s=t("#mCSB_"+r.idx),l=t("#mCSB_"+r.idx+"_container"),c=t(".mCSB_"+r.idx+"_scrollbar");a.live&&p(a.liveSelector||t(e).selector),F.call(this,"remove"),I.call(this),T.call(this),o.removeData(i),K(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),o.removeClass(n+" _"+i+"_"+r.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},h=function(){return"object"!=typeof t(this)||t(this).length<1?o:this},f=function(e){e.autoDraggerLength=!(t.inArray(e.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])>-1)&&e.autoDraggerLength,e.autoExpandScrollbar=!(t.inArray(e.theme,["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"])>-1)&&e.autoExpandScrollbar,e.scrollButtons.enable=!(t.inArray(e.theme,["minimal","minimal-dark"])>-1)&&e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,["minimal","minimal-dark"])>-1||e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,["minimal","minimal-dark"])>-1?"outside":e.scrollbarPosition},p=function(t){s[t]&&(clearTimeout(s[t]),K(s,t))},m=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},v=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},g=function(){var e=t(this),o=e.data(i),r=o.opt,a=r.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+o.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+o.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+o.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+o.idx+"_scrollbar mCS-"+r.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+o.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===r.axis?"mCSB_vertical_horizontal":"x"===r.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===r.axis?s[0]+s[1]:"x"===r.axis?s[1]:s[0],d="yx"===r.axis?"<div id='mCSB_"+o.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",h=r.autoHideScrollbar?" "+u[6]:"",f="x"!==r.axis&&"rtl"===o.langDir?" "+u[7]:"";r.setWidth&&e.css("width",r.setWidth),r.setHeight&&e.css("height",r.setHeight),r.setLeft="y"!==r.axis&&"rtl"===o.langDir?"989999px":r.setLeft,e.addClass(n+" _"+i+"_"+o.idx+h+f).wrapInner("<div id='mCSB_"+o.idx+"' class='mCustomScrollBox mCS-"+r.theme+" "+l+"'><div id='mCSB_"+o.idx+"_container' class='mCSB_container' style='position:relative; top:"+r.setTop+"; left:"+r.setLeft+";' dir='"+o.langDir+"' /></div>");var p=t("#mCSB_"+o.idx),m=t("#mCSB_"+o.idx+"_container");"y"===r.axis||r.advanced.autoExpandHorizontalScroll||m.css("width",_(m)),"outside"===r.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),p.addClass("mCSB_outside").after(c)):(p.addClass("mCSB_inside").append(c),m.wrap(d)),w.call(this);var v=[t("#mCSB_"+o.idx+"_dragger_vertical"),t("#mCSB_"+o.idx+"_dragger_horizontal")];v[0].css("min-height",v[0].height()),v[1].css("min-width",v[1].width())},_=function(e){var n=[e[0].scrollWidth,Math.max.apply(Math,e.children().map(function(){return t(this).outerWidth(!0)}).get())],i=e.parent().width();return n[0]>i?n[0]:n[1]>i?n[1]:"100%"},y=function(){var e=t(this).data(i),n=e.opt,o=t("#mCSB_"+e.idx+"_container");if(n.advanced.autoExpandHorizontalScroll&&"y"!==n.axis){o.css({width:"auto","min-width":0,"overflow-x":"scroll"});var r=Math.ceil(o[0].scrollWidth);3===n.advanced.autoExpandHorizontalScroll||2!==n.advanced.autoExpandHorizontalScroll&&r>o.parent().width()?o.css({width:r,"min-width":"100%","overflow-x":"inherit"}):o.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}},w=function(){var e=t(this).data(i),n=e.opt,o=t(".mCSB_"+e.idx+"_scrollbar:first"),r=nt(n.scrollButtons.tabindex)?"tabindex='"+n.scrollButtons.tabindex+"'":"",a=["<a href='#' class='"+u[13]+"' "+r+" />","<a href='#' class='"+u[14]+"' "+r+" />","<a href='#' class='"+u[15]+"' "+r+" />","<a href='#' class='"+u[16]+"' "+r+" />"],s=["x"===n.axis?a[2]:a[0],"x"===n.axis?a[3]:a[1],a[2],a[3]];n.scrollButtons.enable&&o.prepend(s[0]).append(s[1]).next(".mCSB_scrollTools").prepend(s[2]).append(s[3])},x=function(){var e=t(this).data(i),n=t("#mCSB_"+e.idx),o=t("#mCSB_"+e.idx+"_container"),r=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[n.height()/o.outerHeight(!1),n.width()/o.outerWidth(!1)],s=[parseInt(r[0].css("min-height")),Math.round(a[0]*r[0].parent().height()),parseInt(r[1].css("min-width")),Math.round(a[1]*r[1].parent().width())],c=l&&s[1]<s[0]?s[0]:s[1],u=l&&s[3]<s[2]?s[2]:s[3];r[0].css({height:c,"max-height":r[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":s[0]+"px"}),r[1].css({width:u,"max-width":r[1].parent().width()-10})},S=function(){var e=t(this).data(i),n=t("#mCSB_"+e.idx),o=t("#mCSB_"+e.idx+"_container"),r=[t("#mCSB_"+e.idx+"_dragger_vertical"),t("#mCSB_"+e.idx+"_dragger_horizontal")],a=[o.outerHeight(!1)-n.height(),o.outerWidth(!1)-n.width()],s=[a[0]/(r[0].parent().height()-r[0].height()),a[1]/(r[1].parent().width()-r[1].width())];e.scrollRatio={y:s[0],x:s[1]}},b=function(t,e,n){var i=n?u[0]+"_expanded":"",o=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(u[0]+" "+i),o.toggleClass(u[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(u[0]),o.removeClass(u[1])):(t.addClass(u[0]),o.addClass(u[1])))},C=function(){var e=t(this).data(i),n=t("#mCSB_"+e.idx),o=t("#mCSB_"+e.idx+"_container"),r=null==e.overflowed?o.height():o.outerHeight(!1),a=null==e.overflowed?o.width():o.outerWidth(!1),s=o[0].scrollHeight,l=o[0].scrollWidth;return s>r&&(r=s),l>a&&(a=l),[r>n.height(),a>n.width()]},T=function(){var e=t(this),n=e.data(i),o=n.opt,r=t("#mCSB_"+n.idx),a=t("#mCSB_"+n.idx+"_container"),s=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")];if(V(e),("x"!==o.axis&&!n.overflowed[0]||"y"===o.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),G(e,"_resetY")),"y"!==o.axis&&!n.overflowed[1]||"x"===o.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=r.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),G(e,"_resetX")}},E=function(){function e(){a=setTimeout(function(){t.event.special.mousewheel?(clearTimeout(a),P.call(n[0])):e()},100)}var n=t(this),o=n.data(i),r=o.opt;if(!o.bindEvents){if(D.call(this),r.contentTouchScroll&&M.call(this),O.call(this),r.mouseWheel.enable){var a;e()}H.call(this),$.call(this),r.advanced.autoScrollOnFocus&&W.call(this),r.scrollButtons.enable&&q.call(this),r.keyboard.enable&&j.call(this),o.bindEvents=!0}},I=function(){var e=t(this),n=e.data(i),o=n.opt,r=i+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=t("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=t("#mCSB_"+n.idx+"_container");o.advanced.releaseDraggableSelectors&&s.add(t(o.advanced.releaseDraggableSelectors)),o.advanced.extraDraggableSelectors&&s.add(t(o.advanced.extraDraggableSelectors)),n.bindEvents&&(t(document).add(t(!R()||top.document)).unbind("."+r),s.each(function(){t(this).unbind("."+r)}),clearTimeout(e[0]._focusTimeout),K(e[0],"_focusTimeout"),clearTimeout(n.sequential.step),K(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),K(l[0],"onCompleteTimeout"),n.bindEvents=!1)},k=function(e){var n=t(this),o=n.data(i),r=o.opt,a=t("#mCSB_"+o.idx+"_container_wrapper"),s=a.length?a:t("#mCSB_"+o.idx+"_container"),l=[t("#mCSB_"+o.idx+"_scrollbar_vertical"),t("#mCSB_"+o.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==r.axis&&(o.overflowed[0]&&!e?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(r.alwaysShowScrollbar?(2!==r.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==r.axis&&(o.overflowed[1]&&!e?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(r.alwaysShowScrollbar?(2!==r.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),o.overflowed[0]||o.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},B=function(e){var n=e.type,i=e.target.ownerDocument!==document&&null!==frameElement?[t(frameElement).offset().top,t(frameElement).offset().left]:null,o=R()&&e.target.ownerDocument!==top.document&&null!==frameElement?[t(e.view.frameElement).offset().top,t(e.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return i?[e.originalEvent.pageY-i[0]+o[0],e.originalEvent.pageX-i[1]+o[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var r=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],a=e.originalEvent.touches.length||e.originalEvent.changedTouches.length;return e.target.ownerDocument!==document?[r.screenY,r.screenX,a>1]:[r.pageY,r.pageX,a>1];default:return i?[e.pageY-i[0]+o[0],e.pageX-i[1]+o[1],!1]:[e.pageY,e.pageX,!1]}},D=function(){function e(t,e,i,o){if(f[0].idleTimer=u.scrollInertia<233?250:0,n.attr("id")===h[1])var r="x",l=(n[0].offsetLeft-e+o)*s.scrollRatio.x;else var r="y",l=(n[0].offsetTop-t+i)*s.scrollRatio.y;G(a,l.toString(),{dir:r,drag:!0})}var n,o,r,a=t(this),s=a.data(i),u=s.opt,d=i+"_"+s.idx,h=["mCSB_"+s.idx+"_dragger_vertical","mCSB_"+s.idx+"_dragger_horizontal"],f=t("#mCSB_"+s.idx+"_container"),p=t("#"+h[0]+",#"+h[1]),m=u.advanced.releaseDraggableSelectors?p.add(t(u.advanced.releaseDraggableSelectors)):p,v=u.advanced.extraDraggableSelectors?t(!R()||top.document).add(t(u.advanced.extraDraggableSelectors)):t(!R()||top.document);p.bind("contextmenu."+d,function(t){t.preventDefault()}).bind("mousedown."+d+" touchstart."+d+" pointerdown."+d+" MSPointerDown."+d,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),tt(e)){c=!0,l&&(document.onselectstart=function(){return!1}),L.call(f,!1),V(a);var i=(n=t(this)).offset(),s=B(e)[0]-i.top,d=B(e)[1]-i.left,h=n.height()+i.top,p=n.width()+i.left;h>s&&s>0&&p>d&&d>0&&(o=s,r=d),b(n,"active",u.autoExpandScrollbar)}}).bind("touchmove."+d,function(t){t.stopImmediatePropagation(),t.preventDefault();var i=n.offset(),a=B(t)[0]-i.top,s=B(t)[1]-i.left;e(o,r,a,s)}),t(document).add(v).bind("mousemove."+d+" pointermove."+d+" MSPointerMove."+d,function(t){if(n){var i=n.offset(),a=B(t)[0]-i.top,s=B(t)[1]-i.left;if(o===a&&r===s)return;e(o,r,a,s)}}).add(m).bind("mouseup."+d+" touchend."+d+" pointerup."+d+" MSPointerUp."+d,function(){n&&(b(n,"active",u.autoExpandScrollbar),n=null),c=!1,l&&(document.onselectstart=null),L.call(f,!0)})},M=function(){function n(t){if(!et(t)||c||B(t)[2])e=0;else{e=1,S=0,b=0,u=1,C.removeClass("mCS_touch_action");var n=D.offset();d=B(t)[0]-n.top,h=B(t)[1]-n.left,z=[B(t)[0],B(t)[1]]}}function o(t){if(et(t)&&!c&&!B(t)[2]&&(E.documentTouchScroll||t.preventDefault(),t.stopImmediatePropagation(),(!b||S)&&u)){v=Q();var e=k.offset(),n=B(t)[0]-e.top,i=B(t)[1]-e.left,o="mcsLinearOut";if(O.push(n),P.push(i),z[2]=Math.abs(B(t)[0]-z[0]),z[3]=Math.abs(B(t)[1]-z[1]),T.overflowed[0])var r=M[0].parent().height()-M[0].height(),a=d-n>0&&n-d>-r*T.scrollRatio.y&&(2*z[3]<z[2]||"yx"===E.axis);if(T.overflowed[1])var s=M[1].parent().width()-M[1].width(),f=h-i>0&&i-h>-s*T.scrollRatio.x&&(2*z[2]<z[3]||"yx"===E.axis);a||f?($||t.preventDefault(),S=1):(b=1,C.addClass("mCS_touch_action")),$&&t.preventDefault(),w="yx"===E.axis?[d-n,h-i]:"x"===E.axis?[null,h-i]:[d-n,null],D[0].idleTimer=250,T.overflowed[0]&&l(w[0],A,o,"y","all",!0),T.overflowed[1]&&l(w[1],A,o,"x",L,!0)}}function r(t){if(!et(t)||c||B(t)[2])e=0;else{e=1,t.stopImmediatePropagation(),V(C),m=Q();var n=k.offset();f=B(t)[0]-n.top,p=B(t)[1]-n.left,O=[],P=[]}}function a(t){if(et(t)&&!c&&!B(t)[2]){u=0,t.stopImmediatePropagation(),S=0,b=0,g=Q();var e=k.offset(),n=B(t)[0]-e.top,i=B(t)[1]-e.left;if(!(g-v>30)){var o="mcsEaseOut",r=2.5>(y=1e3/(g-m)),a=r?[O[O.length-2],P[P.length-2]]:[0,0];_=r?[n-a[0],i-a[1]]:[n-f,i-p];var d=[Math.abs(_[0]),Math.abs(_[1])];y=r?[Math.abs(_[0]/4),Math.abs(_[1]/4)]:[y,y];var h=[Math.abs(D[0].offsetTop)-_[0]*s(d[0]/y[0],y[0]),Math.abs(D[0].offsetLeft)-_[1]*s(d[1]/y[1],y[1])];w="yx"===E.axis?[h[0],h[1]]:"x"===E.axis?[null,h[1]]:[h[0],null],x=[4*d[0]+E.scrollInertia,4*d[1]+E.scrollInertia];var C=parseInt(E.contentTouchScroll)||0;w[0]=d[0]>C?w[0]:0,w[1]=d[1]>C?w[1]:0,T.overflowed[0]&&l(w[0],x[0],o,"y",L,!1),T.overflowed[1]&&l(w[1],x[1],o,"x",L,!1)}}}function s(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?n[0]:n[3]:t>60?e>3?n[3]:n[2]:t>30?e>8?n[1]:e>6?n[0]:e>4?e:n[2]:e>8?e:n[3]}function l(t,e,n,i,o,r){t&&G(C,t.toString(),{dur:e,scrollEasing:n,dir:i,overwrite:o,drag:r})}var u,d,h,f,p,m,v,g,_,y,w,x,S,b,C=t(this),T=C.data(i),E=T.opt,I=i+"_"+T.idx,k=t("#mCSB_"+T.idx),D=t("#mCSB_"+T.idx+"_container"),M=[t("#mCSB_"+T.idx+"_dragger_vertical"),t("#mCSB_"+T.idx+"_dragger_horizontal")],O=[],P=[],A=0,L="yx"===E.axis?"none":"all",z=[],H=D.find("iframe"),W=["touchstart."+I+" pointerdown."+I+" MSPointerDown."+I,"touchmove."+I+" pointermove."+I+" MSPointerMove."+I,"touchend."+I+" pointerup."+I+" MSPointerUp."+I],$=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;D.bind(W[0],function(t){n(t)}).bind(W[1],function(t){o(t)}),k.bind(W[0],function(t){r(t)}).bind(W[2],function(t){a(t)}),H.length&&H.each(function(){t(this).bind("load",function(){R(this)&&t(this.contentDocument||this.contentWindow.document).bind(W[0],function(t){n(t),r(t)}).bind(W[1],function(t){o(t)}).bind(W[2],function(t){a(t)})})})},O=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function o(t,e,n){u.type=n&&r?"stepped":"stepless",u.scrollAmount=10,X(a,t,e,"mcsLinearOut",n?60:null)}var r,a=t(this),s=a.data(i),l=s.opt,u=s.sequential,d=i+"_"+s.idx,h=t("#mCSB_"+s.idx+"_container"),f=h.parent();h.bind("mousedown."+d,function(){e||r||(r=1,c=!0)}).add(document).bind("mousemove."+d,function(t){if(!e&&r&&n()){var i=h.offset(),a=B(t)[0]-i.top+h[0].offsetTop,c=B(t)[1]-i.left+h[0].offsetLeft;a>0&&a<f.height()&&c>0&&c<f.width()?u.step&&o("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(0>a?o("on",38):a>f.height()&&o("on",40)),"y"!==l.axis&&s.overflowed[1]&&(0>c?o("on",37):c>f.width()&&o("on",39)))}}).bind("mouseup."+d+" dragend."+d,function(){e||(r&&(r=0,o("off",null)),c=!1)})},P=function(){function e(e,i){if(V(n),!z(n,e.target)){var a="auto"!==r.mouseWheel.deltaFactor?parseInt(r.mouseWheel.deltaFactor):l&&e.deltaFactor<100?100:e.deltaFactor||100,u=r.scrollInertia;if("x"===r.axis||"x"===r.mouseWheel.axis)var d="x",h=[Math.round(a*o.scrollRatio.x),parseInt(r.mouseWheel.scrollAmount)],f="auto"!==r.mouseWheel.scrollAmount?h[1]:h[0]>=s.width()?.9*s.width():h[0],p=Math.abs(t("#mCSB_"+o.idx+"_container")[0].offsetLeft),m=c[1][0].offsetLeft,v=c[1].parent().width()-c[1].width(),g="y"===r.mouseWheel.axis?e.deltaY||i:e.deltaX;else var d="y",h=[Math.round(a*o.scrollRatio.y),parseInt(r.mouseWheel.scrollAmount)],f="auto"!==r.mouseWheel.scrollAmount?h[1]:h[0]>=s.height()?.9*s.height():h[0],p=Math.abs(t("#mCSB_"+o.idx+"_container")[0].offsetTop),m=c[0][0].offsetTop,v=c[0].parent().height()-c[0].height(),g=e.deltaY||i;"y"===d&&!o.overflowed[0]||"x"===d&&!o.overflowed[1]||((r.mouseWheel.invert||e.webkitDirectionInvertedFromDevice)&&(g=-g),r.mouseWheel.normalizeDelta&&(g=0>g?-1:1),(g>0&&0!==m||0>g&&m!==v||r.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),e.deltaFactor<5&&!r.mouseWheel.normalizeDelta&&(f=e.deltaFactor,u=17),G(n,(p-g*f).toString(),{dir:d,dur:u}))}}if(t(this).data(i)){var n=t(this),o=n.data(i),r=o.opt,a=i+"_"+o.idx,s=t("#mCSB_"+o.idx),c=[t("#mCSB_"+o.idx+"_dragger_vertical"),t("#mCSB_"+o.idx+"_dragger_horizontal")],u=t("#mCSB_"+o.idx+"_container").find("iframe");u.length&&u.each(function(){t(this).bind("load",function(){R(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(t,n){e(t,n)})})}),s.bind("mousewheel."+a,function(t,n){e(t,n)})}},A=new Object,R=function(e){var n=!1,i=!1,o=null;if(void 0===e?i="#empty":void 0!==t(e).attr("id")&&(i=t(e).attr("id")),!1!==i&&void 0!==A[i])return A[i];if(e){try{o=(r=e.contentDocument||e.contentWindow.document).body.innerHTML}catch(t){}n=null!==o}else{try{var r=top.document;o=r.body.innerHTML}catch(t){}n=null!==o}return!1!==i&&(A[i]=n),n},L=function(t){var e=this.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}},z=function(e,n){var o=n.nodeName.toLowerCase(),r=e.data(i).opt.mouseWheel.disableOver;return t.inArray(o,r)>-1&&!(t.inArray(o,["select","textarea"])>-1&&!t(n).is(":focus"))},H=function(){var e,n=t(this),o=n.data(i),r=i+"_"+o.idx,a=t("#mCSB_"+o.idx+"_container"),s=a.parent();t(".mCSB_"+o.idx+"_scrollbar ."+u[12]).bind("mousedown."+r+" touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(n){c=!0,t(n.target).hasClass("mCSB_dragger")||(e=1)}).bind("touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(){c=!1}).bind("click."+r,function(i){if(e&&(e=0,t(i.target).hasClass(u[12])||t(i.target).hasClass("mCSB_draggerRail"))){V(n);var r=t(this),l=r.find(".mCSB_dragger");if(r.parent(".mCSB_scrollTools_horizontal").length>0){if(!o.overflowed[1])return;var c="x",d=i.pageX>l.offset().left?-1:1,h=Math.abs(a[0].offsetLeft)-d*(.9*s.width())}else{if(!o.overflowed[0])return;var c="y",d=i.pageY>l.offset().top?-1:1,h=Math.abs(a[0].offsetTop)-d*(.9*s.height())}G(n,h.toString(),{dir:c,scrollEasing:"mcsEaseInOut"})}})},W=function(){var e=t(this),n=e.data(i),o=n.opt,r=i+"_"+n.idx,a=t("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+r,function(){var n=t(document.activeElement),i=a.find(".mCustomScrollBox").length;n.is(o.advanced.autoScrollOnFocus)&&(V(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=i?17*i:0,e[0]._focusTimeout=setTimeout(function(){var t=[it(n)[0],it(n)[1]],i=[a[0].offsetTop,a[0].offsetLeft],r=[i[0]+t[0]>=0&&i[0]+t[0]<s.height()-n.outerHeight(!1),i[1]+t[1]>=0&&i[0]+t[1]<s.width()-n.outerWidth(!1)],l="yx"!==o.axis||r[0]||r[1]?"all":"none";"x"===o.axis||r[0]||G(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0}),"y"===o.axis||r[1]||G(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:l,dur:0})},e[0]._focusTimer))})},$=function(){var e=t(this).data(i),n=i+"_"+e.idx,o=t("#mCSB_"+e.idx+"_container").parent();o.bind("scroll."+n,function(){0===o.scrollTop()&&0===o.scrollLeft()||t(".mCSB_"+e.idx+"_scrollbar").css("visibility","hidden")})},q=function(){var e=t(this),n=e.data(i),o=n.opt,r=n.sequential,a=i+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar";t(s+">a").bind("contextmenu."+a,function(t){t.preventDefault()}).bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(i){function a(t,n){r.scrollAmount=o.scrollButtons.scrollAmount,X(e,t,n)}if(i.preventDefault(),tt(i)){var s=t(this).attr("class");switch(r.type=o.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===r.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===r.type)return;c=!1,r.dir&&a("off",s);break;case"click":if("stepped"!==r.type||n.tweenRunning)return;a("on",s)}}})},j=function(){function e(e){function i(t,e){a.type=r.keyboard.scrollType,a.scrollAmount=r.keyboard.scrollAmount,"stepped"===a.type&&o.tweenRunning||X(n,t,e)}switch(e.type){case"blur":o.tweenRunning&&a.dir&&i("off",null);break;case"keydown":case"keyup":var s=e.keyCode?e.keyCode:e.which,l="on";if("x"!==r.axis&&(38===s||40===s)||"y"!==r.axis&&(37===s||39===s)){if((38===s||40===s)&&!o.overflowed[0]||(37===s||39===s)&&!o.overflowed[1])return;"keyup"===e.type&&(l="off"),t(document.activeElement).is(d)||(e.preventDefault(),e.stopImmediatePropagation(),i(l,s))}else if(33===s||34===s){if((o.overflowed[0]||o.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){V(n);var h=34===s?-1:1;if("x"===r.axis||"yx"===r.axis&&o.overflowed[1]&&!o.overflowed[0])var f="x",p=Math.abs(c[0].offsetLeft)-h*(.9*u.width());else var f="y",p=Math.abs(c[0].offsetTop)-h*(.9*u.height());G(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!t(document.activeElement).is(d)&&((o.overflowed[0]||o.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===r.axis||"yx"===r.axis&&o.overflowed[1]&&!o.overflowed[0])var f="x",p=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var f="y",p=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;G(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}}var n=t(this),o=n.data(i),r=o.opt,a=o.sequential,s=i+"_"+o.idx,l=t("#mCSB_"+o.idx),c=t("#mCSB_"+o.idx+"_container"),u=c.parent(),d="input,textarea,select,datalist,keygen,[contenteditable='true']",h=c.find("iframe"),f=["blur."+s+" keydown."+s+" keyup."+s];h.length&&h.each(function(){t(this).bind("load",function(){R(this)&&t(this.contentDocument||this.contentWindow.document).bind(f[0],function(t){e(t)})})}),l.attr("tabindex","0").bind(f[0],function(t){e(t)})},X=function(e,n,o,r,a){function s(t){c.snapAmount&&(d.scrollAmount=c.snapAmount instanceof Array?"x"===d.dir[0]?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount);var n="stepped"!==d.type,i=a||(t?n?p/1.5:m:1e3/60),o=t?n?7.5:40:2.5,u=[Math.abs(h[0].offsetTop),Math.abs(h[0].offsetLeft)],f=[l.scrollRatio.y>10?10:l.scrollRatio.y,l.scrollRatio.x>10?10:l.scrollRatio.x],v="x"===d.dir[0]?u[1]+d.dir[1]*(f[1]*o):u[0]+d.dir[1]*(f[0]*o),g="x"===d.dir[0]?u[1]+d.dir[1]*parseInt(d.scrollAmount):u[0]+d.dir[1]*parseInt(d.scrollAmount),_="auto"!==d.scrollAmount?g:v,y=r||(t?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear"),w=!!t;return t&&17>i&&(_="x"===d.dir[0]?u[1]:u[0]),G(e,_.toString(),{dir:d.dir[0],scrollEasing:y,dur:i,onComplete:w}),t?void(d.dir=!1):(clearTimeout(d.step),void(d.step=setTimeout(function(){s()},i)))}var l=e.data(i),c=l.opt,d=l.sequential,h=t("#mCSB_"+l.idx+"_container"),f="stepped"===d.type,p=c.scrollInertia<26?26:c.scrollInertia,m=c.scrollInertia<1?17:c.scrollInertia;switch(n){case"on":if(d.dir=[o===u[16]||o===u[15]||39===o||37===o?"x":"y",o===u[13]||o===u[15]||38===o||37===o?-1:1],V(e),nt(o)&&"stepped"===d.type)return;s(f);break;case"off":clearTimeout(d.step),K(d,"step"),V(e),(f||l.tweenRunning&&d.dir)&&s(!0)}},Y=function(e){var n=t(this).data(i).opt,o=[];return"function"==typeof e&&(e=e()),e instanceof Array?o=e.length>1?[e[0],e[1]]:"x"===n.axis?[null,e[0]]:[e[0],null]:(o[0]=e.y?e.y:e.x||"x"===n.axis?null:e,o[1]=e.x?e.x:e.y||"y"===n.axis?null:e),"function"==typeof o[0]&&(o[0]=o[0]()),"function"==typeof o[1]&&(o[1]=o[1]()),o},N=function(e,n){if(null!=e&&void 0!==e){var o=t(this),r=o.data(i),a=r.opt,s=t("#mCSB_"+r.idx+"_container"),l=s.parent(),c=typeof e;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1)-l.width():s.outerHeight(!1)-l.height(),h="x"===n?s[0].offsetLeft:s[0].offsetTop,f="x"===n?"left":"top";switch(c){case"function":return e();case"object":if(!(m=e.jquery?e:t(e)).length)return;return"x"===n?it(m)[1]:it(m)[0];case"string":case"number":if(nt(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(u*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(h-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var p=h+parseInt(e.split("+=")[1]);return p>=0?0:Math.abs(p)}if(-1!==e.indexOf("px")&&nt(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var m=s.find(":"+e);return"x"===n?it(m)[1]:it(m)[0]}return t(e).length?"x"===n?it(t(e))[1]:it(t(e))[0]:(s.css(f,e),void d.update.call(null,o[0]))}}},F=function(e){function n(){return clearTimeout(h[0].autoUpdate),0===s.parents("html").length?void(s=null):void(h[0].autoUpdate=setTimeout(function(){return c.advanced.updateOnSelectorChange&&(l.poll.change.n=r(),l.poll.change.n!==l.poll.change.o)?(l.poll.change.o=l.poll.change.n,void a(3)):c.advanced.updateOnContentResize&&(l.poll.size.n=s[0].scrollHeight+s[0].scrollWidth+h[0].offsetHeight+s[0].offsetHeight+s[0].offsetWidth,l.poll.size.n!==l.poll.size.o)?(l.poll.size.o=l.poll.size.n,void a(1)):!c.advanced.updateOnImageLoad||"auto"===c.advanced.updateOnImageLoad&&"y"===c.axis||(l.poll.img.n=h.find("img").length,l.poll.img.n===l.poll.img.o)?void((c.advanced.updateOnSelectorChange||c.advanced.updateOnContentResize||c.advanced.updateOnImageLoad)&&n()):(l.poll.img.o=l.poll.img.n,void h.find("img").each(function(){o(this)}))},c.advanced.autoUpdateTimeout))}function o(e){if(t(e).hasClass(u[2]))a();else{var n=new Image;n.onload=function(t,e){return function(){return e.apply(t,arguments)}}(n,function(){this.onload=null,t(e).addClass(u[2]),a(2)}),n.src=e.src}}function r(){!0===c.advanced.updateOnSelectorChange&&(c.advanced.updateOnSelectorChange="*");var t=0,e=h.find(c.advanced.updateOnSelectorChange);return c.advanced.updateOnSelectorChange&&e.length>0&&e.each(function(){t+=this.offsetHeight+this.offsetWidth}),t}function a(t){clearTimeout(h[0].autoUpdate),d.update.call(null,s[0],t)}var s=t(this),l=s.data(i),c=l.opt,h=t("#mCSB_"+l.idx+"_container");return e?(clearTimeout(h[0].autoUpdate),void K(h[0],"autoUpdate")):void n()},U=function(t,e,n){return Math.round(t/e)*e-n},V=function(e){var n=e.data(i);t("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal").each(function(){J.call(this)})},G=function(e,n,o){function r(t){return l&&c.callbacks[t]&&"function"==typeof c.callbacks[t]}function a(){return[c.callbacks.alwaysTriggerOffsets||w>=x[0]+C,c.callbacks.alwaysTriggerOffsets||-T>=w]}function s(){var t=[f[0].offsetTop,f[0].offsetLeft],n=[_[0].offsetTop,_[0].offsetLeft],i=[f.outerHeight(!1),f.outerWidth(!1)],r=[h.height(),h.width()];e[0].mcs={content:f,top:t[0],left:t[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(i[0])-r[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(i[1])-r[1])),direction:o.dir}}var l=e.data(i),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},d=[(o=t.extend(u,o)).dur,o.drag?0:o.dur],h=t("#mCSB_"+l.idx),f=t("#mCSB_"+l.idx+"_container"),p=f.parent(),m=c.callbacks.onTotalScrollOffset?Y.call(e,c.callbacks.onTotalScrollOffset):[0,0],v=c.callbacks.onTotalScrollBackOffset?Y.call(e,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=o.trigger,0===p.scrollTop()&&0===p.scrollLeft()||(t(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),p.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(r("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(e[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(r("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(e[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){if(!l.contentReset.y&&e[0].mcs||!l.overflowed[0]||(r("onOverflowY")&&c.callbacks.onOverflowY.call(e[0]),l.contentReset.x=null),!l.contentReset.x&&e[0].mcs||!l.overflowed[1]||(r("onOverflowX")&&c.callbacks.onOverflowX.call(e[0]),l.contentReset.x=null),c.snapAmount){var g=c.snapAmount instanceof Array?"x"===o.dir?c.snapAmount[1]:c.snapAmount[0]:c.snapAmount;n=U(n,g,c.snapOffset)}switch(o.dir){case"x":var _=t("#mCSB_"+l.idx+"_dragger_horizontal"),y="left",w=f[0].offsetLeft,x=[h.width()-f.outerWidth(!1),_.parent().width()-_.width()],S=[n,0===n?0:n/l.scrollRatio.x],C=m[1],T=v[1],E=C>0?C/l.scrollRatio.x:0,I=T>0?T/l.scrollRatio.x:0;break;case"y":var _=t("#mCSB_"+l.idx+"_dragger_vertical"),y="top",w=f[0].offsetTop,x=[h.height()-f.outerHeight(!1),_.parent().height()-_.height()],S=[n,0===n?0:n/l.scrollRatio.y],C=m[0],T=v[0],E=C>0?C/l.scrollRatio.y:0,I=T>0?T/l.scrollRatio.y:0}S[1]<0||0===S[0]&&0===S[1]?S=[0,0]:S[1]>=x[1]?S=[x[0],x[1]]:S[0]=-S[0],e[0].mcs||(s(),r("onInit")&&c.callbacks.onInit.call(e[0])),clearTimeout(f[0].onCompleteTimeout),Z(_[0],y,Math.round(S[1]),d[1],o.scrollEasing),!l.tweenRunning&&(0===w&&S[0]>=0||w===x[0]&&S[0]<=x[0])||Z(f[0],y,Math.round(S[0]),d[0],o.scrollEasing,o.overwrite,{onStart:function(){o.callbacks&&o.onStart&&!l.tweenRunning&&(r("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(e[0])),l.tweenRunning=!0,b(_),l.cbOffsets=a())},onUpdate:function(){o.callbacks&&o.onUpdate&&r("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(o.callbacks&&o.onComplete){"yx"===c.axis&&clearTimeout(f[0].onCompleteTimeout);var t=f[0].idleTimer||0;f[0].onCompleteTimeout=setTimeout(function(){r("onScroll")&&(s(),c.callbacks.onScroll.call(e[0])),r("onTotalScroll")&&S[1]>=x[1]-E&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(e[0])),r("onTotalScrollBack")&&S[1]<=I&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(e[0])),l.tweenRunning=!1,f[0].idleTimer=0,b(_,"hide")},t)}}})}},Z=function(t,e,n,i,o,r,a){function s(){y.stop||(v||h.call(),v=Q()-m,l(),v>=y.time&&(y.time=v>y.time?v+u-(v-y.time):v+u-1,y.time<v+1&&(y.time=v+1)),y.time<i?y.id=d(s):p.call())}function l(){i>0?(y.currVal=c(y.time,g,w,i,o),_[e]=Math.round(y.currVal)+"px"):_[e]=n+"px",f.call()}function c(t,e,n,i,o){switch(o){case"linear":case"mcsLinear":return n*t/i+e;case"mcsLinearOut":return t/=i,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return 1>(t/=i/2)?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e);case"easeInOutStrong":return 1>(t/=i/2)?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(2-Math.pow(2,-10*t))+e);case"easeInOut":case"mcsEaseInOut":return 1>(t/=i/2)?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e);case"easeOutSmooth":return t/=i,t--,-n*(t*t*t*t-1)+e;case"easeOutStrong":return n*(1-Math.pow(2,-10*t/i))+e;case"easeOut":case"mcsEaseOut":default:var r=(t/=i)*t,a=r*t;return e+n*(.499999999999997*a*r+-2.5*r*r+5.5*a+-6.5*r+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var u,d,h=(a=a||{}).onStart||function(){},f=a.onUpdate||function(){},p=a.onComplete||function(){},m=Q(),v=0,g=t.offsetTop,_=t.style,y=t._mTween[e];"left"===e&&(g=t.offsetLeft);var w=n-g;y.stop=0,"none"!==r&&null!=y.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(y.id):clearTimeout(y.id),y.id=null),u=1e3/60,y.time=v+u,d=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},y.id=d(s)},Q=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},J=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var i=e[n];t._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},K=function(t,e){try{delete t[e]}catch(n){t[e]=null}},tt=function(t){return!(t.which&&1!==t.which)},et=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},nt=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},it=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]},ot=function(){var t=function(){var t=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<t.length;e++)if(t[e]+"Hidden"in document)return t[e]+"Hidden";return null}();return!!t&&document[t]};t.fn[n]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[n]=function(e){return d[e]?d[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):d.init.apply(this,arguments)},t[n].defaults=r,window[n]=!0,t(window).bind("load",function(){t(o)[n](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var n,i,o=t(e),r=o.parents(".mCSB_container");if(r.length)return n=r.parent(),(i=[r[0].offsetTop,r[0].offsetLeft])[0]+it(o)[0]>=0&&i[0]+it(o)[0]<n.height()-o.outerHeight(!1)&&i[1]+it(o)[1]>=0&&i[1]+it(o)[1]<n.width()-o.outerWidth(!1)},mcsInSight:t.expr[":"].mcsInSight||function(e,n,i){var o,r,a,s,l=t(e),c=l.parents(".mCSB_container"),u="exact"===i[3]?[[1,0],[1,0]]:[[.9,.1],[.6,.4]];if(c.length)return o=[l.outerHeight(!1),l.outerWidth(!1)],a=[c[0].offsetTop+it(l)[0],c[0].offsetLeft+it(l)[1]],r=[c.parent()[0].offsetHeight,c.parent()[0].offsetWidth],s=[o[0]<r[0]?u[0]:u[1],o[1]<r[1]?u[0]:u[1]],a[0]-r[0]*s[0][0]<0&&a[0]+o[0]-r[0]*s[0][1]>=0&&a[1]-r[1]*s[1][0]<0&&a[1]+o[1]-r[1]*s[1][1]>=0},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var n=t(e).data(i);if(n)return n.overflowed[0]||n.overflowed[1]}})})})});var Page={$win:$(window),$html:$("html"),$body:$("body"),setState:_setState,toggleState:_toggleState,delState:_delState,hasState:_hasState};!function(){function t(t){t.preventDefault()}setTimeout(function(){Page.delState("transition","no")},100),window.devicePixelRatio>1.5&&Page.setState("hidpi"),"ontouchstart"in window||navigator.maxTouchPoints||Page.setState("hoverable"),Page.$win.on("hashchange",t),Page.$html.on("slider.horizontal",function(t,e){Page.slide===e.id&&Page.setState("type","dark"===e.type?"none":"dark")}).on("slider.vertical",function(t,e){Page.setState("type","dark"===e.type?"none":"dark").setState("slide",e.id).delState("menu")}).on("dragstart",'[draggable="false"]',t)}(),$(".timeline").each(function(){function t(t){return t+" "+["диплом","диплома","дипломов"][t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]}function e(t,e){return 1===e?"1 диплом":t+1+"/"+e+" дипломов"}function n(t){l.removeClass("timeline__item_current timeline__item_prev");var e=c[t];i(e),o(t,e),r(t,e)}function i(t){t.$dom.addClass("timeline__item_current"),t.$text.html(t.currentText||t.text)}function o(t,e){for(var n=t;n>=0;--n){var i=c[n];if(e.$dom!==i.$dom){i.$text.html(i.text),i.$dom.addClass("timeline__item_prev");break}}}function r(t,e){for(var n=t;n<c.length;++n){var i=c[n];if(e.$dom!==i.$dom){i.$text.html(i.text);break}}}var a=$(this),s=a.data("id"),l=a.find(".timeline__item"),c=function(){var n=[];return l.each(function(){var i=$(this),o=i.find(".timeline__text"),r=i.data("count"),a={$dom:i,$text:o};if(a.$dom.data("index",n.length),!r)return a.text=a.$text.html(),n.push(a);for(var s=0;s<r;s+=1)(a=$.extend({},a,{text:t(r),currentText:e(s,r)})).$text.html(a.text),n.push(a)}),n}();Page.$win.on("slider.horizontal",function(t,e){e.id===s&&"number"==typeof e.index&&n(e.index)}),a.on("click",".timeline__item",function(){Page.$html.trigger("timeline.click",{id:s,index:$(this).data("index")})}),n(0)}),function(){var t=1e3;$(".achievements, .history").each(function(){function e(t){o($(t.target).closest(".arrow-button").hasClass("arrow-button_next")?1:-1)}function n(){p.eq(0).prop("disabled",0===g).end().eq(1).prop("disabled",g===v)}function i(){m=f.eq(0).innerWidth(),r(g,!0)}function o(t){var e=g+t;e<=v&&e>=0&&r(e)}function r(e,i){var o=(g=e)*m,r=i?0:t;h.stop().animate({scrollLeft:o},r),n(),a(),s(),l()}function a(){f.removeClass("horizontal-slide_current").eq(g).addClass("horizontal-slide_current")}function s(){var t=f.eq(g).data("type");d["dark"===t?"addClass":"removeClass"]("horizontal-slider_type_dark")}function l(){Page.$html.trigger("slider.horizontal",{id:_,type:f.eq(g).data("type"),index:g})}function c(){Page.slide===_&&l()}function u(t,e){e.id===_&&r(e.index)}var d=$(this),h=d.find(".horizontal-slider__list-wrapper"),f=h.find(".horizontal-slide"),p=d.find(".arrow-button"),m=f.eq(0).innerWidth(),v=f.length-1,g=f.filter(".horizontal-slide_current").index(),_=d.data("id");r(g>-1?g:0,!0),p.on("click",e),Page.$win.on("resize",i).on("slider.vertical",c).on("timeline.click",u),function(){if(!Page.hasState("hoverable")){var t=new Hammer(d[0]);t.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),t.on("swipe",function(t){switch(t.direction){case Hammer.DIRECTION_RIGHT:return o(-1);case Hammer.DIRECTION_LEFT:return o(1)}})}}()})}(),function(){var t=1e3,e=8e3;$(".philosophy .horizontal-slider").each(function(){function n(t){d.is(":animated")||o($(t.target).hasClass("arrow-button_next")?1:-1)}function i(){v=d.eq(0).width(),r(_,!0)}function o(t){var e=_+(y=t);e>g?(r(0,!0),e=1):e<0&&(r(g,!0),e=g-1),r(_=e),s(),c(),l(_===g?0:_)}function r(e,n){var i=e*v,o=n?0:t;d.animate({scrollLeft:i},o),a(),y=null}function a(){Page.$html.trigger("slider.horizontal",{id:"philosophy",index:_,type:"dark",direction:y})}function s(){d.find(".horizontal-slide_current").removeClass("horizontal-slide_current")}function l(t){d.find(".horizontal-slide[data-id="+t+"]").addClass("horizontal-slide_current")}function c(){m||(u.addClass("philosophy_timer"),clearTimeout(p),p=setTimeout(o.bind(null,1),e))}var u=$(this),d=u.find(".horizontal-slider__list-wrapper"),h=d.find(".horizontal-slide").map(function(t){return this.dataset.id=t,this}),f=h.eq(0).clone(),p=null,m=!0;d.find(".horizontal-slider__list").append(f);var v=d.eq(0).width(),g=h.length,_=-1,y=null;u.on("click",".arrow-button",n),Page.$win.on("resize",i),Page.$html.on("slider.vertical",a).on("loading.done",function(){m=!1,c()}),$(".loading").length||Page.$html.trigger("loading.done"),function(){if(!Page.hasState("hoverable")){var t=new Hammer(u[0]);t.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),t.on("swipe",function(t){switch(t.direction){case Hammer.DIRECTION_RIGHT:return o(-1);case Hammer.DIRECTION_LEFT:return o(1)}})}}(),o(1)})}(),$(".philosophy-mobile").each(function(){function t(t){var n=r+t;n>a?(e(0,!0),n=1):n<0&&(e(a,!0),n=a-1),r=n,setTimeout(function(){e(r)},16)}function e(t,e){e&&i.addClass("philosophy-mobile_transition_no"),o.removeClass("philosophy__content_current").removeClass("philosophy__content_prev").removeClass("philosophy__content_next"),o.eq(t).addClass("philosophy__content_current"),o.eq(n(1)).addClass("philosophy__content_next"),o.eq(n(-1)).addClass("philosophy__content_prev"),setTimeout(function(){i.removeClass("philosophy-mobile_transition_no")},16)}function n(t){var e=r+t;switch(!0){case e>a:return 1;case e<0:return a-1;default:return e}}var i=$(this),o=i.find(".philosophy__content");i.append(o.first().clone());var r=0,a=(o=i.find(".philosophy__content")).length-1;e(r,!0),Page.$html.on("slider.horizontal",function(e,n){"philosophy"===n.id&&n.direction&&t(n.direction)})}),function(){var t=1e3;$(".vertical-slider").each(function(){function e(t){u=s.height(),d=s[0].scrollHeight-s[0].clientHeight,h>f&&(h=f),a(h,!0)}function n(t,e){a(i(e.id),e.jump)}function i(t){for(var e=0;e<p.length;e+=1)if(p[e].id===t)return e;return-1}function o(t){var e=r(t);h===e||c||a(h=e)}function r(t){var e=h+t;return e>f&&window.innerWidth<768?e:e<0||e>f?h:e}function a(e,n){if(!c){c=!0;var i=(h=e)*u,o=n?0:t;i=i>d?d:i,s.animate({scrollTop:i},o,function(){c=!1}),Page.$html.trigger("slider.vertical",p[h])}}var s=$(this),l=s.find(".vertical-slide"),c=!1,u=null,d=null,h=-1,f=l.length-1,p=l.toArray().map(function(t){return{id:t.dataset.id,type:t.dataset.type}});p.push(p[p.length-1]),function(){var t=i(location.hash.slice(1));a(t>-1?t:0,!0)}(),Page.$win.on("resize",e).on("menu.click",n),new WheelIndicator({elem:s[0],preventMouse:!1,callback:function(t){var e="up"===t.direction?-1:1,n=$(t.target).closest(".history__text");(!n.length||n.hasClass("mCS_no_scrollbar")||"end"===n.data("state")&&1===e||"start"===n.data("state")&&-1===e)&&o(e)}}),function(){if(!Page.hasState("hoverable")){var t=new Hammer(s[0]);t.get("swipe").set({direction:Hammer.DIRECTION_VERTICAL}),t.on("swipe",function(t){switch(t.direction){case Hammer.DIRECTION_DOWN:return o(-1);case Hammer.DIRECTION_UP:return o(1)}})}}(),e()})}(),$(".header").each(function(){var t=$(this).find(".nav__link");Page.$html.on("slider.vertical",function(e,n){location.hash=n.id,t.removeClass("nav__link_current").filter("[href*="+n.id+"]").addClass("nav__link_current")}).on("click",".nav__link, .menu__link",function(){Page.$win.trigger("menu.click",{id:this.href.split("#")[1],jump:$(this).hasClass("menu__link")})}).on("click",".menu__burger, .menu__close",function(){Page.toggleState("menu")})}),$(".history").each(function(){var t=$(this),e=(t.find(".history__title"),t.find(".history__text"));e.data("state","start"),Page.hasState("hoverable")&&e.mCustomScrollbar({theme:"minimal",scrollInertia:0,callbacks:{onScroll:function(){setTimeout(function(){$(this).data("state",{0:"start",100:"end"}[this.mcs.topPct]||"")}.bind(this),250)}}}),bindToWin()}),function(){var t=520,e=140;$(".achievements").each(function(){function n(){r.each(function(t){var n=$(this),i=a.eq(t).height(),o=s.eq(t).height(),r=window.innerHeight-i-o-e;n.height(r),l.eq(t).height(r)})}function i(){r.attr("style",""),l.attr("style","")}var o=$(this),r=o.find(".achievements__content"),a=o.find(".achievements__title-wrapper"),s=o.find(".achievements__jewellery-image"),l=o.find(".achievements__diploma");Page.$win.on("resize orientationchange",function(){if(window.innerHeight>t)return i();r.each(n)}).resize(),$(".page_hoverable").on("mouseenter mouseleave",".gallery-open",function(t){var e=$(this).closest(".achievements__slide"),n="mouseenter"===t.type;e.toggleClass("gallery-open_hovered",n)})})}(),function(){var t=700,e=2;$(".gallery").each(function(){function n(){T=x.eq(0).innerWidth();var t=w.height();S.each(function(e){var n=b.eq(e).innerHeight();$(this).css("max-height",t-n)})}function i(t){o(t),r(t.list),n(),h(e,!0)}function o(t){y.text(t.list.length),g.text(t.title),v.text(t.year)[t.year?"show":"hide"]()}function r(t){w.html(t.reduce(function(t,e,n){return t+a(e,n)},"")),c(),u()}function a(t,e){return'<figure class="gallery__item" data-id="'+e+'">'+s(t)+l(t)+"</figure>"}function s(t){return'<img class="gallery__item-image" alt="'+t.title+'" src="'+t.image+'" srcset="'+t.image.replace(/\.[^\.]*$/,"_2x$&")+' 2x" />'}function l(t){return'<figcaption class="gallery__item-info"><div class="gallery__item-title">'+t.title+"</div>"+(t.text?'<div class="gallery__item-text">'+t.text+"</div>":"")+"</figcaption>"}function c(){for(var t=w.children(),n=0;n<e;n+=1)w.append(t.eq(n).clone().addClass(".gallery__item_fake")).prepend(t.eq(-(n+1)).clone().addClass(".gallery__item_fake"))}function u(){x=w.children(),S=w.find(".gallery__item-image"),b=w.find(".gallery__item-info")}function d(t){var n=C+t,i=x.length-e-1;n<e?(h(i+1,!0),n=i):n>i&&(h(e-1,!0),n=e),h(n)}function h(t,e){w.is(":animated")||(C=t,f(),p(e))}function f(){_.text(C-e+1),x.removeClass("gallery__item_current").filter("[data-id="+x.eq(C).data("id")+"]").addClass("gallery__item_current")}function p(e){var n=T*C+T/2,i=e?0:t;w.animate({scrollLeft:n},i)}var m=$(this),v=m.find(".gallery__year"),g=m.find(".gallery__title"),_=m.find(".gallery__count-current"),y=m.find(".gallery__count-total"),w=m.find(".gallery__list"),x=null,S=null,b=null,C=null,T=0;Page.$body.on("click",".gallery-open",function(){var t=$(this).closest("[data-gallery]").data("gallery");t&&(i(t),Page.setState("gallery"))}).on("click",".gallery__close",function(){Page.delState("gallery")}).on("click",".gallery__item",function(){d($(this).index()>C?1:-1)}).on("click",".gallery .arrow-button",function(){d($(this).hasClass("arrow-button_next")?1:-1)}),function(){if(!Page.hasState("hoverable")){var t=new Hammer(m[0]);t.get("swipe").set({direction:Hammer.DIRECTION_HORIZONTAL}),t.on("swipe",function(t){switch(t.direction){case Hammer.DIRECTION_RIGHT:return d(-1);case Hammer.DIRECTION_LEFT:return d(1)}})}}(),Page.$win.on("resize orientationchange",function(){x&&(n(),p(!0))}).on("keydown",function(t){Page.hasState("gallery")&&27===t.which&&Page.delState("gallery")})})}(),function(){var t=Date.now();$(".loading").each(function(){var e=$(this),n=e.find(".loading__progress-bar");e.on("click",".button",function(){e.addClass("loading_closed"),setTimeout(e.remove.bind(e),500),Page.$html.trigger("loading.done")}),Page.$body.imagesLoaded({background:!0}).always(function(){var n=Date.now()-t,i=n<=2500?2500-n:500;setTimeout(e.addClass.bind(e,"loading_finished"),i),document.cookie=["loaded=1","expires="+6048e5,"path=/"].join(";")}).progress(function(t){var e=t.progressedCount/t.images.length*.9;n.css("transform","scaleX("+e+")")})})}();